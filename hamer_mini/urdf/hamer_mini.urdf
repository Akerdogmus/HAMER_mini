<?xml version='1.0'?>
<robot name="hamer_mini">

	<link name="dummy">
	<!-- Dummy Link -->
   	</link>
	<!-- Dummy Joint -->
  	<joint name="dummy_joint" type="fixed">
     		<parent link="dummy"/>
     		<child link="base_link"/>
   	</joint>

	<!-- Base Link -->
	<link name="base_link">
	 	<visual>
		   <origin xyz="0 0 0" rpy="0 0 0" />
		   <geometry>
			<box size="0.255 0.150 0.04"/>
		   </geometry>
		   <material name="blue">
		      <color rgba="0 0.5 1 1"/>
		   </material>
		</visual>
		<!-- Base Collision -->
		<collision>
		   <origin xyz="0 0 0" rpy="0 0 0" />
		   <geometry>
			<box size="0.255 0.150 0.04"/>
		   </geometry>
		</collision>
		<!-- Base Inertial Elements -->
		<inertial>
		   <mass value="0.5"/>
		   <inertia ixx="0.002776" ixy="0.0" ixz="0.0"
			    iyy="0.003647" iyz="0.0" izz="0.001004"/>
		</inertial>
	</link>

	<!-- Right Back Wheel -->
	<link name="right_back_wheel">
	 	<visual>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		   <material name="black">
		      <color rgba="0.05 0.05 0.05 1"/>
		   </material>
		</visual>
		<!-- Right Back Wheel Collision -->
		<collision>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		</collision>
		<!-- Right Back Wheel Inertial Elements -->
		<inertial>
		   <mass value="0.01"/>
		   <inertia ixx="0.000003204" ixy="0.0" ixz="0.0"
			    iyy="0.000003204" iyz="0.0" izz="0.00005281"/>
		</inertial>
	</link>

	<joint name="joint_right_back_wheel" type="continuous">
	   <parent link="base_link"/>
	   <child link="right_back_wheel"/>
	   <origin xyz="-0.07 -0.086 0" rpy="0 0 0" />
	   <axis xyz="0 1 0"/>
	</joint>

	<!-- Right Front Wheel -->
	<link name="right_front_wheel">
	 	<visual>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		   <material name="black">
		      <color rgba="0.05 0.05 0.05 1"/>
		   </material>
		</visual>
		<!-- Right Front Wheel Collision -->
		<collision>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		</collision>
		<!-- Right Front Wheel Inertial Elements -->
		<inertial>
		   <mass value="0.01"/>
		   <inertia ixx="0.000003204" ixy="0.0" ixz="0.0"
			    iyy="0.000003204" iyz="0.0" izz="0.00005281"/>
		</inertial>
	</link>

	<joint name="joint_right_front_wheel" type="continuous">
	   <parent link="base_link"/>
	   <child link="right_front_wheel"/>
	   <origin xyz="0.07 -0.086 0" rpy="0 0 0" />
	   <axis xyz="0 1 0"/>
	</joint>

	<!-- Left Back Wheel -->
	<link name="left_back_wheel">
	 	<visual>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		   <material name="black">
		      <color rgba="0.05 0.05 0.05 1"/>
		   </material>
		</visual>
		<!-- Left Back Wheel Collision -->
		<collision>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		</collision>
		<!-- Left Back Wheel Inertial Elements -->
		<inertial>
		   <mass value="0.01"/>
		   <inertia ixx="0.000003204" ixy="0.0" ixz="0.0"
			    iyy="0.000003204" iyz="0.0" izz="0.00005281"/>
		</inertial>
	</link>

	<joint name="joint_left_back_wheel" type="continuous">
	   <parent link="base_link"/>
	   <child link="left_back_wheel"/>
	   <origin xyz="-0.07 0.086 0" rpy="0 0 0" />
	   <axis xyz="0 1 0"/>
	</joint>

	<!-- Left Front Wheel -->
	<link name="left_front_wheel">
	 	<visual>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		   <material name="black">
		      <color rgba="0.05 0.05 0.05 1"/>
		   </material>
		</visual>
		<!-- Left Front Wheel Collision -->
		<collision>
		   <origin xyz="0 0 0" rpy="1.570795 0 0" />
		   <geometry>
			<cylinder length="0.026" radius="0.0325" />
		   </geometry>
		</collision>
		<!--Left Front Wheel Inertial Elements -->
		<inertial>
		   <mass value="0.01"/>
		   <inertia ixx="0.000003204" ixy="0.0" ixz="0.0"
			    iyy="0.000003204" iyz="0.0" izz="0.00005281"/>
		</inertial>
	</link>

	<joint name="joint_left_front_wheel" type="continuous">
	   <parent link="base_link"/>
	   <child link="left_front_wheel"/>
	   <origin xyz="0.07 0.086 0" rpy="0 0 0" />
	   <axis xyz="0 1 0"/>
	</joint>

	<!-- Gazebo references -->
	<gazebo reference="base_link">
	   <material>Gazebo/Blue</material>
	</gazebo>
	<gazebo reference="right_front_wheel">
	   <material>Gazebo/Black</material>
	</gazebo>
	<gazebo reference="right_back_wheel">
	   <material>Gazebo/Black</material>
	</gazebo>
	<gazebo reference="left_front_wheel">
	   <material>Gazebo/Black</material>
	</gazebo>
	<gazebo reference="left_back_wheel">
	   <material>Gazebo/Black</material>
	</gazebo>

	<!-- Ultrasonic Sonar Sensors Links -->
	<link name="sonar_front">
		<collision>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</collision>
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</visual> 
		<inertial>
			<mass value="1e-5" />
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
		</inertial>
	</link>

	<joint name="sonar_front_joint" type="fixed">
		<axis xyz="0 0 0" />
		<origin xyz="0.1275 0 0.01" rpy="0 0 0"/>
		<parent link="base_link"/>
		<child link="sonar_front"/>
	</joint>	

	<!-- <link name="sonar_back">
		<collision>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</collision>
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</visual> 
		<inertial>
			<mass value="1e-5" />
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
		</inertial>
	</link>

	<joint name="sonar_back_joint" type="fixed">
		<axis xyz="0 0 0" />
		<origin xyz="-0.1275 0 0.01" rpy="0 3.14 0"/>
		<parent link="base_link"/>
		<child link="sonar_back"/>
	</joint> -->	

	<!-- Front-Left/Right Sonars -->
	<link name="sonar_left">
		<collision>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</collision>
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</visual> 
		<inertial>
			<mass value="1e-5" />
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
		</inertial>
	</link>

	<joint name="sonar_left_joint" type="fixed">
		<axis xyz="0 0 0" />
		<origin xyz="0.1275 0.075 0.01" rpy="0 0 0.785"/>
		<parent link="base_link"/>
		<child link="sonar_left"/>
	</joint>	

	<link name="sonar_right">
		<collision>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</collision>
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<geometry>
				<box size="0.001 0.001 0.001"/>
			</geometry>
		</visual> 
		<inertial>
			<mass value="1e-5" />
			<origin xyz="0 0 0" rpy="0 0 0"/>
			<inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
		</inertial>
	</link>

	<joint name="sonar_right_joint" type="fixed">
		<axis xyz="0 0 0" />
		<origin xyz="0.1275 -0.075 0.01" rpy="0 0 -0.785"/>
		<parent link="base_link"/>
		<child link="sonar_right"/>
	</joint>

	<!-- Ultrasonic Sonar Sensors Gazebo Ref. -->
	<gazebo reference="sonar_front">
		<material>Gazebo/Green</material>
		<sensor type="ray" name="sonar_front">
		  <pose>0 0 0 0 0 0</pose>
		  <update_rate>5</update_rate>
		  <ray>
		    <scan>
		      <horizontal>
		        <samples>5</samples>
		        <resolution>1.0</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </horizontal>
		      <vertical>
		        <samples>5</samples>
		        <resolution>1</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </vertical>
		    </scan>
		    <range>
		      <min>0.01</min>
		      <max>0.9</max>
		      <resolution>0.01</resolution>
		    </range>
		  </ray>
		  <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
		    <gaussianNoise>0.005</gaussianNoise>
		    <alwaysOn>true</alwaysOn>
		    <updateRate>5</updateRate>
		    <topicName>sonar_front</topicName>
		    <frameName>sonar_front</frameName>
		    <fov>0.7</fov>
		    <radiation>ultrasound</radiation>
		  </plugin>
		</sensor>
	</gazebo>

	<!--<gazebo reference="sonar_back">
		<material>Gazebo/Green</material>
		<sensor type="ray" name="sonar_back">
		  <pose>0 0 0 0 0 0</pose>
		  <update_rate>5</update_rate>
		  <ray>
		    <scan>
		      <horizontal>
		        <samples>5</samples>
		        <resolution>1.0</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </horizontal>
		      <vertical>
		        <samples>5</samples>
		        <resolution>1</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </vertical>
		    </scan>
		    <range>
		      <min>0.01</min>
		      <max>0.9</max>
		      <resolution>0.01</resolution>
		    </range>
		  </ray>
		  <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
		    <gaussianNoise>0.005</gaussianNoise>
		    <alwaysOn>true</alwaysOn>
		    <updateRate>5</updateRate>
		    <topicName>sonar_back</topicName>
		    <frameName>sonar_back</frameName>
		    <fov>0.7</fov>
		    <radiation>ultrasound</radiation>
		  </plugin>
		</sensor>
	</gazebo> -->
	
	
	<gazebo reference="sonar_left">
		<material>Gazebo/Green</material>
		<sensor type="ray" name="sonar_left">
		  <pose>0 0 0 0 0 0</pose>
		  <update_rate>5</update_rate>
		  <ray>
		    <scan>
		      <horizontal>
		        <samples>5</samples>
		        <resolution>1.0</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </horizontal>
		      <vertical>
		        <samples>5</samples>
		        <resolution>1</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </vertical>
		    </scan>
		    <range>
		      <min>0.01</min>
		      <max>0.9</max>
		      <resolution>0.01</resolution>
		    </range>
		  </ray>
		  <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
		    <gaussianNoise>0.005</gaussianNoise>
		    <alwaysOn>true</alwaysOn>
		    <updateRate>5</updateRate>
		    <topicName>sonar_left</topicName>
		    <frameName>sonar_left</frameName>
		    <fov>0.7</fov>
		    <radiation>ultrasound</radiation>
		  </plugin>
		</sensor>
	</gazebo>

	<gazebo reference="sonar_right">
		<material>Gazebo/Green</material>
		<sensor type="ray" name="sonar_right">
		  <pose>0 0 0 0 0 0</pose>
		  <update_rate>5</update_rate>
		  <ray>
		    <scan>
		      <horizontal>
		        <samples>5</samples>
		        <resolution>1.0</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </horizontal>
		      <vertical>
		        <samples>5</samples>
		        <resolution>1</resolution>
		        <min_angle>-0.3</min_angle>
		        <max_angle>0.3</max_angle>
		      </vertical>
		    </scan>
		    <range>
		      <min>0.01</min>
		      <max>0.9</max>
		      <resolution>0.01</resolution>
		    </range>
		  </ray>
		  <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
		    <gaussianNoise>0.005</gaussianNoise>
		    <alwaysOn>true</alwaysOn>
		    <updateRate>5</updateRate>
		    <topicName>sonar_right</topicName>
		    <frameName>sonar_right</frameName>
		    <fov>0.7</fov>
		    <radiation>ultrasound</radiation>
		  </plugin>
		</sensor>
	</gazebo>

	<!-- Differential Drive Plugin 
	<gazebo>
	    <plugin name="differential_drive_controller"
		    filename="libgazebo_ros_diff_drive.so">
		<leftJoint>joint_left_back_wheel</leftJoint>
		<rightJoint>joint_right_back_wheel</rightJoint>
		<robotBaseFrame>base_link</robotBaseFrame>
		<wheelSeparation>0.25</wheelSeparation>
		<wheelDiameter>0.07</wheelDiameter>
		<publishWheelJointState>true</publishWheelJointState>
	     </plugin>
	</gazebo>  -->
 
	<!-- Gazebo ROS Control Plugin and Planar Move Plugin -->
	<gazebo>
		<plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
			<robotNamespace>/hamer_mini</robotNamespace>
			<robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
			<legacyModeNS>true</legacyModeNS>
		</plugin>
	</gazebo> 	

	<gazebo>
		<plugin name="base_controller" filename="libgazebo_ros_planar_move.so">
		    <commandTopic>cmd_vel</commandTopic>
		    <odometryTopic>odom</odometryTopic>
		    <odometryFrame>odom</odometryFrame>
		    <odometryRate>100</odometryRate>
		    <robotBaseFrame>base_link</robotBaseFrame>
		</plugin>
	</gazebo> 

</robot> 
